<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Android SDK of Diyalog Messaging Platform · Diyalog</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Diyalog SDK is used for enabling messaging for your application. It is a multi-platform communication Messaging SDK for mobile and web. It is easy to integrate, save development cost and delight users with a stable, secure and customization messaging.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Android SDK of Diyalog Messaging Platform · Diyalog"/><meta property="og:type" content="website"/><meta property="og:url" content="https://diyalog-im.github.io/index.html"/><meta property="og:description" content="&lt;p&gt;Diyalog SDK is used for enabling messaging for your application. It is a multi-platform communication Messaging SDK for mobile and web. It is easy to integrate, save development cost and delight users with a stable, secure and customization messaging.&lt;/p&gt;
"/><meta property="og:image" content="https://diyalog-im.github.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://diyalog-im.github.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/big_logo_wihte.png" alt="Diyalog"/><h2 class="headerTitleWithLogo">Diyalog</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/GettingStarted/overview" target="_self">Docs</a></li><li class=""><a href="https://github.com/diyalog-im/diyalog-platform" target="_self">GitHub</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Android</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/GettingStarted/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/en/GettingStarted/getstarted">Getting Started</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Android</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/Android/doc_getting_started">How to configure Diyalog</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Android/tokenBaseAuth">Token Base Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Android/doc_style">Diyalog Android SDK Style</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">iOS</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/iOS/iOS">How to configure Diyalog</a></li><li class="navListItem"><a class="navItem" href="/docs/en/iOS/TokenBaseAuthentication">Token Base Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/en/iOS/RichView">Richiew Notificaion Support</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Cordova plugin</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/cordovaPlugin/HowToUseCordova">How to add Cordova plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/en/cordovaPlugin/CreateCordovaPlugin/CreateCordovaPlugin">How to create Cordova plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/en/cordovaPlugin/CreateIonicProject/CreateIonicProject">How to create ionic project</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Web SDK</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/diyalogWebSdk/WebSdk">How to use WEB SDK</a></li><li class="navListItem"><a class="navItem" href="/docs/en/diyalogWebSdk/OpenDiyalogSDK/OpenDiyalogSDK">Use Web SDK Javascript from My Web App</a></li><li class="navListItem"><a class="navItem" href="/docs/en/diyalogWebSdk/OpenInDiyalogSDKAngularJSApp/OpenInDiyalogSDKAngularJSApp">Use Web SDK from AngularJS Web App</a></li><li class="navListItem"><a class="navItem" href="/docs/en/diyalogWebSdk/OpenInIFrame/OpenInIFrame">Add Web App to an IFrame</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Messaging API</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/diyalog-messaging-api/diyalog-messaging-api">Messaging API Reference</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Integration With Domain</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/diyalog-webhook-api/diyalog-webhook-api">Diyalog-Integration-With-Domain</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Android SDK of Diyalog Messaging Platform</h1></header><article><div><span><p>Diyalog SDK is used for enabling messaging for your application. It is a multi-platform communication Messaging SDK for mobile and web. It is easy to integrate, save development cost and delight users with a stable, secure and customization messaging.</p>
<h2><a class="anchor" aria-hidden="true" id="sdk-supports"></a><a href="#sdk-supports" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SDK Supports</h2>
<p>Diyalog SDK supported with Android 4.0.3(API level 15) &amp; Above</p>
<h3><a class="anchor" aria-hidden="true" id="features"></a><a href="#features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h3>
<ul>
<li>One-to-One Chat</li>
<li>Group Chat</li>
<li>Send text message</li>
<li>Send Media file (Audio, Video, Image)</li>
<li>Send Location</li>
<li>Share Contact</li>
<li>Audio Call</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="configuration-steps"></a><a href="#configuration-steps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration Steps</h3>
<p><strong>Step 1:</strong> Open your Project level build.gradle file and add below mentioned maven repository Url in build.grdle file.<br /></p>
<pre><code class="hljs css language-sh">repositories {
    jcenter()
    mavenCentral()
    ...
    maven {
        credentials {
            username mavenUser
            password mavenPassword
        }
        url <span class="hljs-string">'http://mavenrepo.diyalog.im:18081/repository/maven-releases/'</span>
    }
}
</code></pre>
<p><strong>You will need credential for access our private repository. We will create a user for your company.
Please contact us to get mavenUser and mavenPassword for accessing repository.</strong></p>
<p><strong>Step 2:</strong> Open module level build.grdle file. <br /></p>
<p><strong>a. set compile and target sdk version to 26 and above</strong></p>
<pre><code class="hljs css language-sh">compileSdkVersion 26
    defaultConfig {
        --
        minSdkVersion 15
        targetSdkVersion 26
        --
    multiDexEnabled <span class="hljs-literal">true</span>
    }
    dexOptions {
        javaMaxHeapSize <span class="hljs-string">"2g"</span>
    }
    lintOptions {
        abortOnError <span class="hljs-literal">false</span>
    }
</code></pre>
<p><strong>b. Add below mentioned dependency</strong></p>
<pre><code class="hljs css language-sh">implementation <span class="hljs-string">"im.diyalog:DiyalogEngine:0.0.1"</span>
</code></pre>
<p><strong>Step 3:</strong> Open your project AndroidManifest.xml file and add below line of code inside <application> tag.</p>
<pre><code class="hljs css language-sh">&lt;meta-data
    android:name=<span class="hljs-string">"com.google.android.geo.API_KEY"</span>
    android:value=<span class="hljs-string">"YOUR_API_KEY_HERE"</span> /&gt;
</code></pre>
<p><strong>Note</strong> : Replace <strong>YOUR_API_KEY_HERE</strong> with your actual <strong>Map API</strong> key which you will get from your google Api console
To get Map API key please check this</p>
<p><strong>Link :</strong> <strong><a href="https://developers.google.com/maps/documentation/android-api/signup">https://developers.google.com/maps/documentation/android-api/signup</a></strong></p>
<p><strong>Step 4:</strong> Create Application class and extend it with <strong>DiyalogEngineApplication</strong>. And override <strong>onConfigureDiyalogEngine()</strong> method.
Inside that method set below configure.<br />
<strong>a. Set Server End Point:</strong></p>
<pre><code class="hljs css language-sh">DiyalogEngine.diyalogInstance().setEndpoints(new String[]{<span class="hljs-string">"YOUR_SERVER_URL_HERE"</span>});
</code></pre>
<p><strong>b. Set push ID:</strong> You need to set push ID to get push notification while application is closed.</p>
<pre><code class="hljs css language-sh">DiyalogEngine.diyalogInstance().setPushId(YOUR_PUSH_ID_HERE);
</code></pre>
<p><strong>Note</strong> : Replace <strong>YOUR_PUSH_ID</strong> with your actual <strong>Push ID</strong> key which you will get from your google console</p>
<p><strong>c. Set Custom theme color:</strong></p>
<pre><code class="hljs css language-sh">DiyalogStyle style = DiyalogEngine.diyalogInstance().style;
style.setMainColor(Color.parseColor(<span class="hljs-string">"#42f47a"</span>));    
</code></pre>
<p><strong>Note:</strong> Diyalog SDK gives you many customization in the chat views. You can learn details about styling Diyalog in <strong><a href="doc_style">styling document.</a></strong></p>
<p><strong>d. Set Configurable following parameter :</strong></p>
<ul>
<li>Set enable/disable audio call funcation</li>
<li>Set Application name</li>
<li>Invite URL</li>
<li>Help line number</li>
<li>Privacy policy text/URL</li>
<li>Terms and condition text/URL</li>
<li>Enable back button on Chat home screen.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="full-code"></a><a href="#full-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Full Code:</h4>
<pre><code class="hljs css language-sh">public class DiyalogApplication extends DiyalogEngineApplication {
    @Override
    public void <span class="hljs-function"><span class="hljs-title">onConfigureDiyalogEngine</span></span>() {


        // <span class="hljs-built_in">set</span> here your end point
        DiyalogEngine.diyalogInstance().setEndpoints(new String[]{<span class="hljs-string">"YOUR_SERVER_URL_HERE "</span>});

        // <span class="hljs-built_in">set</span> here your end point
                DiyalogEngine.diyalogInstance().setPushId(YOUR_PUSH_ID);

        // <span class="hljs-built_in">set</span> here you application theme color
        DiyalogStyle style = DiyalogEngine.diyalogInstance().style;
        style.setMainColor(Color.parseColor(<span class="hljs-string">"#FFFF4081"</span>));
    }
}
</code></pre>
<p>Do not forget to mention application class  in <strong>AndroidManifest.xml</strong> inside <strong><application></strong> tag using <strong>android:name</strong> property.</p>
<p><strong>Step 5:</strong> Now you have done with integration steps, Add below code for open chat screen from your application.  This will first check user authentication is completed or not, First time it will ask for login screen and after authentication complete it will open chat screen. Follow below steps</p>
<ul>
<li><strong>a.</strong> import messenger class <strong>“import static im.diyalog.sdk.util.DiyalogEngineMessenger.messenger;”</strong></li>
<li><strong>b.</strong> And code for start chat screen<br /></li>
</ul>
<pre><code class="hljs css language-sh">btnStartChat.setOnClickListener(new View.<span class="hljs-function"><span class="hljs-title">OnClickListener</span></span>() {
    @Override
    public void onClick(View v) {

           <span class="hljs-keyword">if</span> (messenger().getAuthState() != AuthState.LOGGED_IN) {

            long lastActiveAuthID = messenger().getPreferences().getLongOfKey(Authentication.KEY_LAST_ACTIVEUSER_AUTH_ID);
            <span class="hljs-keyword">if</span> (lastActiveAuthID == 0)
            {
                Bundle authExtras = new Bundle();
                authExtras.putInt(AuthActivity.SIGN_TYPE_KEY, AuthActivity.SIGN_TYPE_IN);
                authExtras.putInt(AuthActivity.USER_TYPE_KEY, AuthActivity.USER_TYPE_PERSONAL);
                DiyalogEngine.diyalogInstance().getActivityManager().startAuthActivity(MainActivity.this, authExtras);
                finish();
            }
            <span class="hljs-keyword">else</span> {

                messenger().autoLogin(lastActiveAuthID);
                messenger().switchAccount();
                messenger().killAppStateActor();

                DiyalogEngine.diyalogInstance().createDiyalog(getApplication());
                DiyalogEngine.diyalogInstance().startMessagingApp(this);
                finish();
            }
            <span class="hljs-built_in">return</span>;


        }

        DiyalogEngine.diyalogInstance().startMessagingApp(this);
        finish();
    }
});
</code></pre>
<p></br></p>
<p>-----------------------------------------------------------------------------------------------------------------------------------------</p>
<h2><a class="anchor" aria-hidden="true" id="integrate-firebase-messaging-push-notification-with-diyalog-sdk"></a><a href="#integrate-firebase-messaging-push-notification-with-diyalog-sdk" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Integrate Firebase Messaging Push notification with Diyalog SDK</h2>
<p>In Diyalog SDK we have used firebase messaging platform for sending push notification. so we have used firebase services in sdk. Client need to configure as below into main application.</p>
<h3><a class="anchor" aria-hidden="true" id="to-create-a-firebase-project"></a><a href="#to-create-a-firebase-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>To create a Firebase project</h3>
<p>Client need to do Configur below Steps on firebase console</p>
<p><strong>Step 1:</strong> Create a Firebase project in the <a href="https://console.firebase.google.com/">Firebase console</a>, if you don't have any project then Click <strong>Add project</strong>. If you already have an existing Google project associated with your mobile app, select it from the <strong>Project name</strong> drop down menu. Otherwise, enter a project name to create a new project</p>
<p><strong>Step 2:</strong> Follow the remaining steps and click <strong>Create project</strong> (or <strong>Add Firebase</strong> if you have existing project) for your project. When the process completes, you'll be taken to the project overview.</p>
<h3><a class="anchor" aria-hidden="true" id="now-that-you-have-a-project-you-can-add-your-android-app-to-it"></a><a href="#now-that-you-have-a-project-you-can-add-your-android-app-to-it" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Now that you have a project, you can add your Android app to it</h3>
<p><strong>Step 1:</strong> Click <strong>Add Firebase to your Android app</strong> and follow the setup steps. If you're importing an existing Google project, this may happen automatically and you can just download the config file.</p>
<p><strong>Step 2:</strong> When prompted, enter your app's package name. It's important to enter the package name your app is using; this can only be set when you add an app to your Firebase project.</p>
<p><strong>Step 3:</strong> During the process, you'll download a <strong>google-services.json</strong> file. You can download this file again at any time.</p>
<p><strong>Step 4:</strong> After you add the initialization code, run your app to send verification to the Firebase console that you've successfully installed Firebase.</p>
<h3><a class="anchor" aria-hidden="true" id="configuration-steps-for-android-project"></a><a href="#configuration-steps-for-android-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration Steps for android project</h3>
<p>Client need to perform a few basic steps to prepare your Android Studio project.</p>
<p><strong>Step 1:</strong> Add <strong>google-services.json</strong> file to application level project. (usually the app/google-services.json)</br>
<strong>Step 2:</strong> Add rules to your root-level build.gradle file, to include the google-services plugin and the Google's Maven repository.</p>
<pre><code class="hljs css language-sh">buildscript {
    // ...
    dependencies {
        // ...
        classpath <span class="hljs-string">'com.google.gms:google-services:4.1.0'</span> // google-services plugin
    }
}

allprojects {
    // ...
    repositories {
        // ...
        google() // Google<span class="hljs-string">'s Maven repository
    }
}
</span></code></pre>
<p><strong>Step 3:</strong> Then, in your module Gradle file (usually the app/build.gradle), add the apply plugin line at the bottom of the file to enable the Gradle plugin. You should also add the dependencies for the Firebase SDKs.</p>
<pre><code class="hljs css language-sh">apply plugin: <span class="hljs-string">'com.android.application'</span>

android {
  // ...
}

dependencies {
  // ...
    implementation <span class="hljs-string">'com.google.firebase:firebase-messaging:12.0.1'</span>
    implementation <span class="hljs-string">'com.google.firebase:firebase-core:12.0.1'</span>

}

// ADD THIS AT THE BOTTOM
apply plugin: <span class="hljs-string">'com.google.gms.google-services'</span>
</code></pre>
<p><strong>Step 4:</strong> Now, client require to Pass sender ID/project ID to sdk from main application as below. client need to pass this pushID before Initialize() sdk. Client can register pushID into application class.</p>
<pre><code class="hljs css language-sh"> DiyalogEngine.diyalogInstance().setPushId(214910017039L);
</code></pre>
<p>Done. Above steps are enough for generating push notification, if main application has no any FCM integration.</p>
<h3><a class="anchor" aria-hidden="true" id="main-application-has-firebase-push-notification"></a><a href="#main-application-has-firebase-push-notification" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Main application has firebase push notification</h3>
<p>If in main application has also firebase push notification then client need to follow additinal below steps to configure FCM push notification.</p>
<p><strong>Step 1:</strong> Client need send device token to diyalog sdk from main application's FirebaseInstanceIdService class.<br /></p>
<pre><code class="hljs css language-sh"> public class MyFirebaseInstanceIDService extends FirebaseInstanceIdService {
    private static final String TAG = DiyalogFirebaseInstanceIDService.class.getSimpleName();

    @Override
    public void <span class="hljs-function"><span class="hljs-title">onTokenRefresh</span></span>() {
        super.onTokenRefresh();

        String refreshedToken = FirebaseInstanceId.getInstance().getToken();
        Log.d(TAG, <span class="hljs-string">"Token loaded Application:"</span> + refreshedToken);

        DiyalogEngine.diyalogInstance().storeDeviceToken(getApplicationContext(),refreshedToken);
    }
}
</code></pre>
<p><strong>Step 2:</strong> Client need to pass push payload data(RemoteMessage) to diyalog sdk from application's  FirebaseMessagingService.<br /></p>
<pre><code class="hljs css language-sh">public class MyFirebaseMessagingService extends FirebaseMessagingService {
    private static final String TAG = MyFirebaseMessagingService.class.getSimpleName();

    @Override
    public void onMessageReceived(RemoteMessage remoteMessage) {

            //show notification of Diyalog sdk
            DiyalogMessageService firebaseservice = new DiyalogMessageService(getApplication());
            firebaseservice.processPushMessage(remoteMessage);      

    }
}

</code></pre>
<p><strong>Step 3:</strong> Open your project AndroidManifest.xml file and register firebase service as below line of code inside <application> tag.</p>
<pre><code class="hljs css language-sh">
       &lt;!--FCM push notification--&gt;
        &lt;service android:name=<span class="hljs-string">".MyFirebaseInstanceIDService"</span>&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=<span class="hljs-string">"com.google.firebase.INSTANCE_ID_EVENT"</span> /&gt;
            &lt;/intent-filter&gt;
        &lt;/service&gt;

        &lt;service android:name=<span class="hljs-string">".MyFirebaseMessagingService"</span>&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=<span class="hljs-string">"com.google.firebase.MESSAGING_EVENT"</span> /&gt;
            &lt;/intent-filter&gt;
        &lt;/service&gt;

</code></pre>
<p>Done.  :)</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/GettingStarted/getstarted"><span class="arrow-prev">← </span><span>Getting Started</span></a><a class="docs-next button" href="/docs/en/Android/tokenBaseAuth"><span>Token Base Authentication</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#sdk-supports">SDK Supports</a><ul class="toc-headings"><li><a href="#features">Features</a></li><li><a href="#configuration-steps">Configuration Steps</a></li></ul></li><li><a href="#integrate-firebase-messaging-push-notification-with-diyalog-sdk">Integrate Firebase Messaging Push notification with Diyalog SDK</a><ul class="toc-headings"><li><a href="#to-create-a-firebase-project">To create a Firebase project</a></li><li><a href="#now-that-you-have-a-project-you-can-add-your-android-app-to-it">Now that you have a project, you can add your Android app to it</a></li><li><a href="#configuration-steps-for-android-project">Configuration Steps for android project</a></li><li><a href="#main-application-has-firebase-push-notification">Main application has firebase push notification</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/favicon.png" alt="Diyalog" width="66" height="52"/></a><div><h5>Docs</h5><a href="/docs/en/GettingStarted/overview">Getting Started</a><a href="/docs/en/Android/doc_getting_started">Android</a><a href="/docs/en/iOS/iOS">iOS</a><a href="/docs/en/cordovaPlugin/HowToUseCordova">Cordova plugin</a><a href="/docs/en/diyalogWebSdk/WebSdk">Web SDK</a><a href="/docs/en/diyalog-messaging-api/diyalog-messaging-api">Messaging API</a><a href="/docs/en/diyalog-webhook-api/diyalog-webhook-api">Integration With Domain</a></div><div><h5>Community</h5><a href="https://landing.diyalog.im/#features" target="_blank" rel="noreferrer noopener">User Features</a><a href="https://landing.diyalog.im/#whyus" target="_blank" rel="noreferrer noopener">Why Diyalog</a><a href="https://landing.diyalog.im/#packages" target="_blank" rel="noreferrer noopener">packages</a><a href="https://landing.diyalog.im/#apisection" target="_blank" rel="noreferrer noopener">Dialog API and SDK</a><a href="https://landing.diyalog.im/#contact" target="_blank" rel="noreferrer noopener">contact</a></div><div><h5>More</h5><a href="https://github.com/diyalog-im/diyalog-platform" target="_blank" rel="noreferrer noopener">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright"><div>Copyright © 2019 Diyalog - All Rights Reserved</div><div><a href="/docs/en/privacy_terms/privacy">Privacy  &amp; Terms</a></div></section></footer></div></body></html>