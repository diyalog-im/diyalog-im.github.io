<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Diyalog - Dlg Messenger Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Diyalog - Dlg Messenger Blog Atom Feed"><title data-react-helmet="true">Authentication | Diyalog - Dlg Messenger</title><meta data-react-helmet="true" property="og:url" content="https://diyalog-im.github.io/docs/diyalog-api-authentication"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Authentication | Diyalog - Dlg Messenger"><meta data-react-helmet="true" name="description" content="&lt;span"><meta data-react-helmet="true" property="og:description" content="&lt;span"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://diyalog-im.github.io/docs/diyalog-api-authentication"><link data-react-helmet="true" rel="alternate" href="https://diyalog-im.github.io/docs/diyalog-api-authentication" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://diyalog-im.github.io/docs/diyalog-api-authentication" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0ac7f9f3.css">
<link rel="preload" href="/assets/js/styles.695c6bf0.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.6e58efbe.js" as="script">
<link rel="preload" href="/assets/js/main.99d71c81.js" as="script">
<link rel="preload" href="/assets/js/1.14b115f3.js" as="script">
<link rel="preload" href="/assets/js/2.8f549132.js" as="script">
<link rel="preload" href="/assets/js/76.78d53189.js" as="script">
<link rel="preload" href="/assets/js/77.055acd52.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.6f76243c.js" as="script">
<link rel="preload" href="/assets/js/17896441.4f5ed39e.js" as="script">
<link rel="preload" href="/assets/js/4be959cd.ae83cb47.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/./img/logo-black@2x.png" alt="Diyalog Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/./img/logo-black@2x.png" alt="Diyalog Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Diyalog - DLG Messenger</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><a class="navbar__item navbar__link" href="/aboutus">About Us</a><a class="navbar__item navbar__link" href="/contactus">Contact Us</a><a href="https://github.com/diyalog-im/diyalog-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/./img/logo-black@2x.png" alt="Diyalog Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/./img/logo-black@2x.png" alt="Diyalog Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Diyalog - DLG Messenger</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/overview">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/aboutus">About Us</a></li><li class="menu__list-item"><a class="menu__link" href="/contactus">Contact Us</a></li><li class="menu__list-item"><a href="https://github.com/diyalog-im/diyalog-platform" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getstarted">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Android</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/android_getting_started">How to use Diyalog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/android_configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/android_style">Styling</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/android_video_help">Video Help</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/android_online_help">Online Help</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/android_tokenBaseAuth">Token Base Authentication</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">iOS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/iOS_getting_started">How to configure Diyalog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/iOS_TokenBaseAuthentication">Token Base Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/iOS_RichView">RichView Notification Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/iOS_style">Diyalog IOS SDK Style</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cordova plugin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cordova_HowToUseCordova">How to add Cordova plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cordova_CreatePlugin">How to create Cordova plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cordova_CreateIonicProject">How to create ionic project</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalogWeb_WebSdk">How to use WEB SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalogWeb_OpenDiyalogSDK">Use Web SDK Javascript from My Web App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalogWeb_OpenInDiyalogSDKAngularJSApp">Use Web SDK from AngularJS Web App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalogWeb_OpenInIFrame">Add Web App to an IFrame</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Api Reference</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/diyalog-api-authentication">Authentication</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Messaging API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-sendmessage-api">SendMessage API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Templates</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-textmessage">Text Message</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-quickreplies">Quick Replies Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-generictemplate">Generic Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-buttontemplate">Button Template</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-messaging-api-sendotp-api">SendOTP API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/webhook">Webhooks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Reporting API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-reporting-api-overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-reporting-api-getonlinehelplist">getonlinehelplist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-reporting-api-getcalllist">getcalllist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-reporting-api-getstaffmessaginglist">getstaffmessaginglist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-reporting-api-getcustomermessaginglist">getcustomermessaginglist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/diyalog-reporting-api-getmessagingdetail">getmessagingdetail</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ops_rancher_restart">Rancher 1.6 Operations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Privacy and Terms</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/privacy">Diyalog (dlg) Messenger Legal Info</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Authentication</h1></header><div class="markdown"><p>Diyalog API&#x27;yi kullanabilmek için uygulamanızın doğrulanması gerekmektedir. Bunun için Diyalog AccessKeyId ve AccessKeySecret çifti kullanmaktadır. Öncelikle uygulamanız için bu erişim key id ve secret bilgilerini Diyalog adminininden talep etmeniz gerekmektedir.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="api-isteklerini-yapabilmeniz-için-gerekli-olan-kimlik-bilgileri-"></a>API isteklerini yapabilmeniz için gerekli olan kimlik bilgileri :<a class="hash-link" href="#api-isteklerini-yapabilmeniz-için-gerekli-olan-kimlik-bilgileri-" title="Direct link to heading">#</a></h5><ul><li><span style="color:#1877F2">AccessKeyId :</span> Uygulamanıza özel oluşturulmuş olan erişim anahtarı id bilgisidir.</li><li><span style="color:#1877F2">AccessKeySecret :</span> Uygulamanıza özel oluşturulan şifreleme anahtarıdır. Bu anahtar kullanılara isteklerinizi imzalama işlemi yapılır.</li></ul><p>Diyalog API&#x27;lerine çağrı yapmak için, her isteği doğrulamanız gerekir. Diyalog Platformu doğrulama için HMAC Authentication mekanizması kullanmaktadır.</p><ul><li>HMAC Authentication</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="güvenlik"></a>Güvenlik<a class="hash-link" href="#güvenlik" title="Direct link to heading">#</a></h3><p>Kimlik doğrulama için Transport Layer Security(TLS) gereklidir. Yapılan API isteklerinin SSL ile şifrelenmiş olması gerekmektedir.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hmac-authentication"></a>HMAC Authentication<a class="hash-link" href="#hmac-authentication" title="Direct link to heading">#</a></h3><p>Diyalog API HTTP isteklerinin doğrulanması için HMAC Authentication algoritması ve makanizması kullanılmaktadır. Bu mekanizma ile yapılan isteklerin bütünlüğü ve yetkili bir uygulama tarafından yapıldığı doğrulanmaktadır.</p><p>Diyalog admin kullanıcısı uygulamanız için AccessKeyId ve AccessKeySecret çiftini oluşturduktan sonra bu bilgiler kullanılarak yapılan her api isteğinin MAC(Message Authentication Code) değeri HMAC SHA256 algoritması kullanılarak oluşturulmalı ve isteğinizin header bölümünde iletilmelidir. Ayrıca yine istek zamanı ve isteği yapan kişinin sicil numarası header&#x27;a eklenmelidir. Bu bilgiler kullanılarak isteğimiz Diyalog Platformu tarafından doğrulanacak ve API&#x27;den cevap alabileceksiniz.</p><p>Güvenlik için, HTTPS/TLS kullanmanız gerekir.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hmac-kimlik-doğrulama-için-yapılan-her-api-isteğinin-header-bölümüne-eklemeniz-gereken-alanlar-şu-şekildedir-"></a>HMAC kimlik doğrulama için yapılan her API isteğinin header bölümüne eklemeniz gereken alanlar şu şekildedir :<a class="hash-link" href="#hmac-kimlik-doğrulama-için-yapılan-her-api-isteğinin-header-bölümüne-eklemeniz-gereken-alanlar-şu-şekildedir-" title="Direct link to heading">#</a></h5><ul><li><span style="color:#1877F2">x-dlg-date</span><p>  İsteğin yapıldığı zaman bilgisidir. Zaman bilgisi  <span style="color:#42b72a">&quot;EEE, dd MMM yyyy HH:mm:ss Z&quot;</span> formatında oluşturulmalıdır.</p><span style="background-color:#f2f2f2;border-radius:2px;padding:0.2rem">x-dlg-date : &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot;</span><p>  Örneğin: <span style="color:#d60b0b;background-color:#f2f2f2;border-radius:2px;padding:0.2rem">Date : Tue, 09 Mar 2021 13:28:32 GMT</span></p><ul><li>Yerel makinenizin yerel zaman damgasını kullanmalısınız.</li><li>Zaman damganızın Diyalog sunucusu tarafından kullanılan zamandan +/- 15 dakikadan fazla kaymadığından emin olmalısınız, aksi takdirde talebiniz başarısız olur.</li><li>Zaman damganızın yerel saat dilimini içerdiğinden emin olmalısınız. Eksikse, Diyalog platformu saat diliminizin GMT olduğunu varsayar ve bunu zaman damgasıyla karşılaştırır.</li></ul></li></ul><ul><li><span style="color:#1877F2">x-dlg-requester-userid</span><p>İsteği yapan kullanıcın sicili veya sisteminizdeki tekil id bilgisidir. Bu bilgi audit logları için kullanılmaktadır.</p><span style="background-color:#f2f2f2;border-radius:2px;padding:0.2rem">x-dlg-requester-userid : “userId of requester”</span><p>  Örneğin: <span style="color:#d60b0b;background-color:#f2f2f2;border-radius:2px;padding:0.2rem">X-Requester-UserId : 45186</span></p></li><li><span style="color:#1877F2">x-dlg-authorization</span><p>API isteğiniz bu alanda oluşturduğunuz isteğinizin imzası ile onaylanacaktır.x-dlg-authorization header&#x27;ı aşağıdaki bilgilerin birleştirilmesi ile oluşturulur.</p><span style="color:#d60b0b">x-dlg-authorization : &quot;DLGA &quot; + AccessKeyId + &quot;:&quot; + Signature</span><p>  Örneğin : <span style="color:#d60b0b;background-color:#f2f2f2;border-radius:2px;padding:0.2rem">x-dlg-authorization : “DLGA 1234567-8ABC-DEF0-5432-56712ABCDEF5:4J2OtxTeMpyfMad4y26RaKA/rrk=</span></p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="x-dlg-authorization-headerının-oluşturulması"></a>x-dlg-authorization headerının oluşturulması<a class="hash-link" href="#x-dlg-authorization-headerının-oluşturulması" title="Direct link to heading">#</a></h4><p>  Pseudo-code </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stringToSign = HTTP-method + &quot;\n&quot;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + Content-Type + &quot;\n&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + Date + &quot;\n&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + CanonicalizedPOSTVariables</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + CanonicalizedResource</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Signature = base64(hmac-sha256(AccessKeySecret, stringToSign))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">x-dlg-authorization = &quot;DLGA &quot; + AccessKeyId + &quot;:&quot; + Signature</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>  Yukarıda pseudo-code&#x27;u verilmiş olan hmac hesaplamasında gösterilmiştir. </p><ol><li>Öncelikle imzalanacak string oluşturulur. Yukarıdaki kodda gösterildiği üzere bu string HTTP-method, Content-Type, Date, CanonicalizedPOSTVariables ve CanonicalizedResource değerlerinin her biri arasına newline eklenerek birleştirilmiş halidir.</li><li>İmzalamaya girdi olacak olan stringToSign HMAC-SHA256 şifreleme algoritması ve uygulamanız için oluşturulan AccessKeySecret kullanılarak imzalanır ve MAC oluşturulur.</li><li>Oluşturulan imza Base64 encode edilir.</li><li>Base64 encode edilen imzanın değeri &quot;DLGA &quot;, AccessKeyId  ile &quot;DLGA &quot; + AccessKeyId + &quot;:&quot; + Signature formülü kullanılarak x-dlg-authorization header oluşturulur.</li></ol><p>İmzalanacak string içinde kullanılan alanların anlamları aşağıdaki gibidir.</p><p>  <strong>HTTP-method :</strong> API isteğini yaptığınız HTTP istek tipidir. (GET, POST, PUT, DELETE)  </p><p>  <strong>Content-Type :</strong> HTTP isteğin content tipidir. Örneğin (&quot;application/json&quot;)  </p><p>  <strong>Date :</strong>   İstek zamanıdır. Buradaki istek zamanına <strong>x-dlg-date</strong> header alanına verilen date bilgisi verilmelidir.  </p><p>  <strong>CanonicalizedPOSTVariables :</strong> POST isteklerinizde geçerli olacak istek body&#x27;sinin string halidir. Burada istek body&#x27;sinin tam olarak nasıl görünüyorsa o şekilde eklenmesi gerekmektedir. Örneğin uygulanız bir json body&#x27;sini newline ve tablar ile oluşturup Diyalog&#x27;a gönderiyorsa imzalamak için birebir aynı görünümlü body&#x27;nin string hali bu alana konulmalıdır.  </p><p>  <strong>CanonicalizedResource :</strong> Bu bilgi istek URI&#x27;nızdan alınır. Istek URI&#x27;nın sunucu adresinden sonraki bilgilerdir.</p><p>  Örneğin : HTTP iseğinizin URI&#x27;ı <span style="background-color:#f2f2f2;border-radius:2px;padding:0.2rem"><a href="https://api.diyalog.im/v1/reporting/getonlinehelplist" target="_blank" rel="noopener noreferrer">https://api.diyalog.im/v1/reporting/getonlinehelplist</a></span> olsun. Bu istek URI&#x27;nın CanonicalizedResource&#x27;u <span style="color:#d60b0b;background-color:#f2f2f2;border-radius:2px;padding:0.2rem">/v1/reporting/getonlinehelplist</span> olacaktır.</p><p>  İmzalanacak string örneği :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stringToSign = &quot;POST&quot; + &quot;\n&quot;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + &quot;application/json&quot; + &quot;\n&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + &quot;Tue, 09 Mar 2021 13:28:32 GMT&quot; + &quot;\n&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + &quot;{ + &quot;\n&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;  \&quot;customerId\&quot; : \&quot;2337368\&quot;,&quot; + &quot;\n&quot; +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;  \&quot;agentUserId\&quot; : \&quot;45186\&quot;,&quot; + &quot;\n&quot; +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;  \&quot;startDate\&quot; : 1,&quot; + &quot;\n&quot; +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;  \&quot;endDate\&quot; : 2&quot; + &quot;\n&quot; +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;}&quot; + &quot;\n&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                + &quot;/v1/reporting/getonlinehelplist&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="özet---diyalog-hmac-authentication-doğrulama-için-yapılması-gerekenler"></a>Özet - Diyalog HMAC Authentication Doğrulama için yapılması gerekenler<a class="hash-link" href="#özet---diyalog-hmac-authentication-doğrulama-için-yapılması-gerekenler" title="Direct link to heading">#</a></h3><ol><li><p>Uygulamanız için Diyalog admininden AccessKeyId ve AccessKeySecret bilgileri alınmalıdır.</p></li><li><p>HTTP isteği API&#x27;ye göre oluşturulmalı.</p></li><li><p>API isteğini yaptığınız zaman bilgisi &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot; formatında oluşturulamalı ve x-dlg-date isim ile HTTP isteğin header&#x27;ına eklenmelidir.</p></li><li><p>İsteği hangi kullanıcı için yaptığınız bilgisini yani isteği yapan gerçek kullanıcının sicil veya tekil kullanıcı numarasını x-dlg-requester-userid ismi ile HTTP isteğin header&#x27;ına eklenmekidir.</p></li><li><p>HTTP Api istek body&#x27;si oluşturulmalıdır.</p></li><li><p>HMAC doğrulama yapılabilmesi için aşağıdaki alanları içeren imzalanacak string oluşturulmaldır.</p><p>HTTP-method
Content-Type
Date
CanonicalizedPOSTVariables
CanonicalizedResource</p></li><li><p>AccesKeySecret kulllanılarak imzalanacak string&#x27;in HMAC-SHA256 ile hash&#x27;i oluşturulmalı ve base64 encode edilmelidir.</p></li><li><p>Oluşturulan signature (imza) kullanılarak doğrulama verisi &quot;DLGA &quot; + AccessKeyId + &quot;:&quot; + Signature formulü ile authorizasyon datası oluşturulmalı ve HTTP isteğin header&#x27;ına x-dlg-authorization ismi ile eklenmelidir.</p></li><li><p>Yukarıda belirtilen şekilde istek hazırlandıktan sonra HDiyalog API sunucuların istek gönderilebilir.</p></li></ol><p>Örnek curl HTTP API POST isteği :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly curl"><div tabindex="0" class="prism-code language-curl codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;http://api.diyalog.im/v1/reporting/getonlinehelplist&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;x-dlg-date: Tue, 09 Mar 2021 13:28:32 GMT&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;x-dlg-authorization: DLGA 1234567-8ABC-DEF0-5432-56712ABCDEF5:4J2OtxTeMpyfMad4y26RaKA/rrk=&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;x-dlg-requester-userid: 45186&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw &#x27;{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;customerId&quot; : &quot;2337368&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;agentUserId&quot; : &quot;45186&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;startDate&quot; : 1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;endDate&quot; : 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hmac-authentication-hata-durumları"></a>HMAC Authentication Hata Durumları<a class="hash-link" href="#hmac-authentication-hata-durumları" title="Direct link to heading">#</a></h3><p>API isteği yapıldığında Diyalog API sunucuları yukarıdaki header alanları üzerinden istek yapılan API&#x27;ye ilgili uygulamanın yetkisi olup olmadığını kontrol eder. Eğer yetki sorunu veya doğrulanamayan bir istek olduğunda aşağıdaki hatalar sunuculardan dönecektir.</p><table><thead><tr><th>Http Status Code</th><th>Mesaj</th><th>Açıklama</th></tr></thead><tbody><tr><td><span style="color:#d60b0b;border-radius:2px;padding:0.2rem">400</span></td><td>Required headers not found</td><td>Date, X-Requester-UserId veya X-Authorization header alanlarından biri veya birkaçı eksik.</td></tr><tr><td><span style="color:#d60b0b;border-radius:2px;padding:0.2rem">400</span></td><td>Authorization failed due to data format not valid</td><td>X-Authorization header alanındaki bilgiler doğru formatta değil. Alanın &quot;DLGA &quot; ile başlayıp accesKeyId ve imza değerleri arasına : olduğunu kontrol edin.</td></tr><tr><td><span style="color:#d60b0b;border-radius:2px;padding:0.2rem">400</span></td><td>Authorization failed due to date not valid</td><td>X-DLG-DATE tarih formatı &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot; formatında değil. Kontrol edin..</td></tr><tr><td><span style="color:#d60b0b;border-radius:2px;padding:0.2rem">401</span></td><td>Authorization failed</td><td>İstek doğrulanamadı. İmza değeri doğru değil.</td></tr><tr><td><span style="color:#d60b0b;border-radius:2px;padding:0.2rem">403</span></td><td>Request time may not be correct.</td><td>İstek header&#x27;ında gelen x-dlg-date ve sunucu zamanı arasında +/- 15 dakikadan fazla fark var.</td></tr></tbody></table></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/diyalogWeb_OpenInIFrame"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« How to Add Diyalog Web App to an IFrame in a Web App</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/diyalog-messaging-api-overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#güvenlik" class="table-of-contents__link">Güvenlik</a></li><li><a href="#hmac-authentication" class="table-of-contents__link">HMAC Authentication</a></li><li><a href="#özet---diyalog-hmac-authentication-doğrulama-için-yapılması-gerekenler" class="table-of-contents__link">Özet - Diyalog HMAC Authentication Doğrulama için yapılması gerekenler</a></li><li><a href="#hmac-authentication-hata-durumları" class="table-of-contents__link">HMAC Authentication Hata Durumları</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview">Docs</a></li><li class="footer__item"><a href="https://github.com/diyalog-im/diyalog-platform" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/aboutus">About Us</a></li><li class="footer__item"><a class="footer__link-item" href="/contactus">Contact Us</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/privacy">Privacy and Terms</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Downloads</h4><ul class="footer__items"><li class="footer__item"><a href="https://play.google.com/store/apps/details?id=im.diyalog.diyalogapp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Android</a></li><li class="footer__item"><a href="https://apps.apple.com/us/app/dlg-messenger/id1449572267?ls=1" target="_blank" rel="noopener noreferrer" class="footer__link-item">iPhone</a></li><li class="footer__item"><a href="https://web.dlgmessenger.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Web App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Diyalog - All Rights Reserved</div></div></div></footer></div>
<script src="/assets/js/styles.695c6bf0.js"></script>
<script src="/assets/js/runtime~main.6e58efbe.js"></script>
<script src="/assets/js/main.99d71c81.js"></script>
<script src="/assets/js/1.14b115f3.js"></script>
<script src="/assets/js/2.8f549132.js"></script>
<script src="/assets/js/76.78d53189.js"></script>
<script src="/assets/js/77.055acd52.js"></script>
<script src="/assets/js/935f2afb.6f76243c.js"></script>
<script src="/assets/js/17896441.4f5ed39e.js"></script>
<script src="/assets/js/4be959cd.ae83cb47.js"></script>
</body>
</html>