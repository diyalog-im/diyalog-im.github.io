(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{131:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return b})),t.d(a,"metadata",(function(){return d})),t.d(a,"Highlight",(function(){return c})),t.d(a,"HighlightWithBlack",(function(){return o})),t.d(a,"ColoredText",(function(){return s})),t.d(a,"CenteredText",(function(){return u})),t.d(a,"GreenColoredText",(function(){return m})),t.d(a,"BlueColoredText",(function(){return p})),t.d(a,"rightToc",(function(){return O})),t.d(a,"default",(function(){return g}));var n=t(1),i=t(9),l=(t(191),t(190)),r=t(193),b={id:"diyalog-messaging-api-sendotp-api",title:"SendOTP API",sidebar_label:"SendOTP API"},d={id:"diyalog-messaging-api-sendotp-api",title:"SendOTP API",description:"export const Highlight = ({children, color}) => (",source:"@site/../docs/diyalog-messaging-api-sendotp-api.md",permalink:"/docs/diyalog-messaging-api-sendotp-api",sidebar_label:"SendOTP API",sidebar:"docs",previous:{title:"Button Mesaj \u015eablonu",permalink:"/docs/diyalog-messaging-api-buttontemplate"},next:{title:"Webhook",permalink:"/docs/webhook"}},c=function(e){var a=e.children,t=e.color;return Object(l.b)("span",{style:{backgroundColor:t,borderRadius:"2px",color:"#fff",padding:"0.2rem"}},a)},o=function(e){var a=e.children,t=e.color;return Object(l.b)("span",{style:{backgroundColor:t,borderRadius:"2px",padding:"0.2rem"}},a)},s=function(e){var a=e.children,t=e.color;return Object(l.b)("span",{style:{color:t}},a)},u=function(e){var a=e.children;return Object(l.b)("span",{style:{align:"center"}},a)},m=function(e){var a=e.children;return Object(l.b)("span",{style:{color:"#42b72a"}},a)},p=function(e){var a=e.children;return Object(l.b)("span",{style:{color:"#1877F2"}},a)},O=[{value:"\u0130stek URI&#39;\u0131",id:"i\u0307stek-uri\u0131",children:[]},{value:"\u0130stek Json Objesi Detaylar\u0131",id:"i\u0307stek-json-objesi-detaylar\u0131",children:[{value:"<GreenColoredText>buttonV2</GreenColoredText>",id:"greencoloredtextbuttonv2greencoloredtext",children:[]}]},{value:"D\xf6nen Yan\u0131t (Response)",id:"d\xf6nen-yan\u0131t-response",children:[{value:"Yan\u0131t \xd6rne\u011fi",id:"yan\u0131t-\xf6rne\u011fi",children:[]}]}],j={Highlight:c,HighlightWithBlack:o,ColoredText:s,CenteredText:u,GreenColoredText:m,BlueColoredText:p,rightToc:O};function g(e){var a=e.components,t=Object(i.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},j,t,{components:a,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Kullan\u0131c\u0131lar\u0131n\u0131za tek seferlik \u015fifre (mobil onay kodu) g\xf6ndermek isterseniz bu api'yi kullanabilirsiniz.\nNormal \u015fartlarda SendMessage api'sini de kullanarak kullan\u0131c\u0131lar\u0131n\u0131za OTP g\xf6nderebilirsiniz ama bu api'yi kullan\u0131rsan\u0131z,\ng\xf6nderdi\u011finiz otp mesajlar\u0131 ayr\u0131 veri tabanlar\u0131nda istatistiksel olarak tutulmakta ve admin kullan\u0131c\u0131lar taraf\u0131ndan istenildi\u011finde\nkontrol edilebilmektedir."),Object(l.b)("p",null,"SendMessage api'si ile g\xf6nderilmesinden bir di\u011fer fark\u0131da DLG Mobil SDK'lar bu otp mesajlar\u0131ndan gelen tek seferlik \u015fifre bilgisini\nsdk'y\u0131 kullanan ana uygulamaya event olarak da haberdar edebilmekte ve bu sayede ana uygulamada\notp de\u011ferleri otomatik olarak alg\u0131lan\u0131p do\u011frulu\u011fu kontrol edildikten sonra kullan\u0131c\u0131n\u0131n elle m\xfcdahale yapmas\u0131na gerek kalmadan\ni\u015fleme devam edebilmesini sa\u011flayabilmektedir."),Object(l.b)("p",null,"OTP mesajlar\u0131da metin, g\xf6rsel ve butonlardan olau\u015fabilir.\n\u0130sterseniz sadece metin, veya metin ve g\xf6rsel veya metin, d\xfc\u011fmeler veya metin, g\xf6rsel ve d\xfc\u011fmelerden olu\u015fan \u015fekilde\notp mesaj\u0131 iletebilirsiniz."),Object(l.b)("img",{alt:"",src:Object(r.a)("img/otpmessage.png"),height:"300px"}),Object(l.b)("h2",{id:"i\u0307stek-uri\u0131"},"\u0130stek URI'\u0131"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"https://<DIYALOG-SERVER-API-ENDPOINT>/v1/bots/sendmok/<YOUR-BOT-ACCESS-TOKEN>\n")),Object(l.b)("h4",{id:"\xf6rnek-i\u0307stek"},"\xd6rnek \u0130stek"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-powershell"}),'curl -X POST -H "Content-Type: application/json" -d \'{\n    "customerNo": "123456789",\n    "messageId": "messageId-74",\n    "mokMessage": "Your one time password is \\"123456\\" ",\n    "mokValue": "33",\n    "imageUrl" : "https://dlgmessenger.com/otp.jpg",\n    "txCode": "LOG2",\n    "deviceId": "628FAF5A-B690-4E1A-A0EC-1518A6334F0B",\n    "buttonsV2" : \n     [\n             {\n                "type" :"postback",\n                "title" : "Approve",\n                "payload" : "123456",\n                "payloadHidden" : true,\n                "payloadSeenByUser": "Onayl\u0131yorum"\n            },\n             {\n                "type" :"postback",\n                "title" : "Dismiss",\n                "payload" : "cancelled",\n                "payloadSeenByUser": "\u0130ptal Edildi"\n            }\n        ]\n}\' "https://<DIYALOG-SERVER-API-ENDPOINT>/v1/bots/sendmok/<YOUR-BOT-ACCESS-TOKEN>"\n')),Object(l.b)("h2",{id:"i\u0307stek-json-objesi-detaylar\u0131"},"\u0130stek Json Objesi Detaylar\u0131"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Alan"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Tip"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"A\xe7\u0131klama"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Zorunlu Alan"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"customerNo"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Otp mesaj\u0131 g\xf6ndermek istedi\u011finiz kullan\u0131c\u0131n\u0131n m\xfc\u015fteri numaras\u0131d\u0131r."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Evet")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"messageId"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Sisteminizde olu\u015fturdu\u011funuz tekil mesaj id'sidir. T\xfcm mesaj iletimleri ve cevaplar\u0131 vs. gibi eventleri DLG bu id ile size besler. E\u011fer id vermezseniz DLG sizin i\xe7in bir id \xfcretecek ve bu id \xfczerinden eventleri iletecektir."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Evet")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"mokMessage"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"M\xfc\u015fterinize g\xf6stermek istedi\u011finiz otp mesaj\u0131d\u0131r."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Evet")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"mokValue"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Otp de\u011feridir. Bu alan\u0131 api'ye iletirseniz Mobil DLG SDK otp de\u011ferini ana uygulamaya event olarak da g\xf6nderir. Bu sayede isterseniz otomatik otp giri\u015f i\u015flemleri yapabilirsiniz."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Opsiyonel")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"imageUrl"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"E\u011fer otp mesaj\u0131n\u0131za g\xf6rsel eklemek istiyorsan\u0131z bu alan g\xf6rselinizin uri adresini verebilirsiniz."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Opsiyonel")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"txCode"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Loglama i\xe7in isterseniz bu alana g\xf6nderdi\u011finiz otp'nin hangi i\u015flem ile ilgili oldu\u011funu yazabilirsiniz. Bu alan sadece geriye d\xf6n\xfck incelemelerde kullan\u0131l\u0131r."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Opsiyonel")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"deviceId"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Loglama i\xe7in isterseniz otp mesaj\u0131n\u0131 g\xf6nderdi\u011finiz kullan\u0131c\u0131n\u0131n cihaz id'sini bu alandan yazabilirsiniz. Bu alan sadece geriye d\xf6n\xfck incelemelerde kullan\u0131l\u0131r."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Opsiyonel")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"buttonsV2"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Array<",Object(l.b)("a",Object(n.a)({parentName:"td"},{href:"#greencoloredtextbuttonv2greencoloredtext"}),"buttonV2"),">"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Otp mesaj\u0131n\u0131za onayla, iptal gibi d\xfc\u011fmeler koyabilirsiniz. Bu d\xfc\u011fmeler sayesinde kullan\u0131c\u0131ya otomatik olarak otp'yi onaylatabilirsiniz."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Opsiyonel")))),Object(l.b)("h3",{id:"greencoloredtextbuttonv2greencoloredtext"},Object(l.b)(m,{mdxType:"GreenColoredText"},"buttonV2")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Alan"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Tip"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"A\xe7\u0131klama"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Zorunlu Alan"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"type"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Butona bas\u0131ld\u0131\u011f\u0131nda butonun davran\u0131\u015f\u0131n\u0131 belirler. ",Object(l.b)("strong",{parentName:"td"},'"postback"')," ve ",Object(l.b)("strong",{parentName:"td"},'"web_url"')," olarak iki t\xfcr\xfc vard\u0131r."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Evet")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"title"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"M\xfc\u015fteriye butonlar\u0131n \xfczerinde g\xf6sterilecek metindir."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Evet")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"payload"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Bu alanda verdi\u011finiz data e\u011fer buton tipi ",Object(l.b)("strong",{parentName:"td"},"postback")," ise butona bas\u0131ld\u0131\u011f\u0131nda size geri iletilir. Bu sayede m\xfc\u015fterinin hangi butona bast\u0131\u011f\u0131n\u0131 anlayabilirsiniz. E\u011fer buton tipiniz ",Object(l.b)("strong",{parentName:"td"},'"web_url"')," ise bu alanda kullan\u0131c\u0131n\u0131zn a\xe7mas\u0131n\u0131 istedi\u011finiz uri adresini vermelisiniz. Kullan\u0131c\u0131 d\xfc\u011fmeye bast\u0131\u011f\u0131nda bu uri cihazda a\xe7\u0131lacakt\u0131r."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Evet")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"payloadHidden"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Boolean"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Bu flag ",Object(l.b)("strong",{parentName:"td"},"postback")," tipi d\xfc\u011fmeler i\xe7in ge\xe7erlidir. Ger\xe7ekten mesaj\u0131 iletti\u011finiz m\xfc\u015fterinin cihaz\u0131ndan, payload geldi\u011finden emin olmak istiyorsan\u0131z bu flag'i true set etmeniz gerekiyor. Bu flag true ise mobil cihazda bulunan uygulama anahtarlar\u0131 ile payload imzalanacak ve sizin uygulaman\u0131za iletilecektir. Tabi imzalanm\u0131\u015f datay\u0131 \xe7\xf6zebilmek i\xe7in sizinde uygulama anahtarlar\u0131n\u0131 biliyor olman\u0131z gerekiyor."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Optional")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"payloadSeenByUser"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Bu alan e\u011fer m\xfc\u015fteriye butona bast\u0131\u011f\u0131nda chat ekran\u0131nda payload alan\u0131ndaki de\u011ferden farkl\u0131 bir mesaj g\xf6stermek isterseniz kullanaca\u011f\u0131n\u0131z aland\u0131r. Bu alanda verdi\u011finiz metin kullan\u0131c\u0131 d\xfc\u011fmeye bast\u0131\u011f\u0131nda chat ekran\u0131nda g\xf6r\xfcn\xfcr."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Optional")))),Object(l.b)(c,{color:"#da3d5f",mdxType:"Highlight"},"\xd6nemli Not :"),Object(l.b)("p",null,"Kullan\u0131c\u0131 mobil cihaz\u0131ndan, g\xf6nderdi\u011finiz buton objesi olan bir mesaj\u0131n butonuna bast\u0131\u011f\u0131nda, webhook yap\u0131s\u0131 \xfczerinden kullan\u0131c\u0131n\u0131n se\xe7ti\u011fi butonun payload alan\u0131nda verdi\u011finiz\nde\u011fer uygulaman\u0131za iletilir.  "),Object(l.b)("p",null,"E\u011fer ",Object(l.b)("strong",{parentName:"p"},"payloadHidden")," de\u011ferini ",Object(l.b)("strong",{parentName:"p"},"true")," yapm\u0131\u015fsan\u0131z payload mobil istemcide kurumun kendi bildi\u011fi DLG platformunun bilmedi\u011fi anahtarlar ile imzalan\u0131p size o \u015fekilde iletilir.\nBu sayede uygulaman\u0131z, ger\xe7ekten do\u011fru mobil cihazdan buton se\xe7iminin yap\u0131lm\u0131\u015f oldu\u011fundan emin olabilir. Bunun i\xe7in DLGSDK'n\u0131n \xe7al\u0131\u015ft\u0131\u011f\u0131 mobil uygulaman\u0131zda imzalama i\u015fleminin yap\u0131lm\u0131\u015f\nolmas\u0131 gerekmektedir. Ayr\u0131ca sizin uygulaman\u0131z\u0131nda ayn\u0131 anahtarlara sahip olmas\u0131 ve imzalanm\u0131\u015f payload'u de\u015fifre edebiliyor olman\u0131z gerekmektedir."),Object(l.b)("p",null,"Bir di\u011fer \xf6nemli konuda ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"(#greencoloredtextpayloadgreencoloredtext)%3E"}),"payload")," objesi i\xe7in verdi\u011finiz ",Object(l.b)(m,{mdxType:"GreenColoredText"},"messageId")," dir. D\xfc\u011fmeye bas\u0131ld\u0131\u011f\u0131nda\nbu alan\u0131n de\u011feri payload ile birlikte a\u015fa\u011f\u0131daki formatta uygulaman\u0131za beslenir. Yani istek i\xe7erisinde\napi'ye iletilen mesageId k\xf6\u015feli parantez i\xe7erisinde, payload'unuzla \":\"  karakteri ile ayr\u0131larak iletilir. "),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\xd6rne\u011fin :"),Object(l.b)("br",{parentName:"p"}),"\n",'"',"[","messageId-74","]",':123456"'),Object(l.b)("p",null,"E\u011fer payloadHidden true olarak set edilmi\u015f olsayd\u0131 bu de\u011fer a\u015fa\u011f\u0131daki gibi olacakt\u0131r. Yani payload de\u011feri imzalanm\u0131\u015f olarak iletilecektir."),Object(l.b)("p",null,'"',"[","messageId-74","]",':12a22113123131213aaab444cb3c224bcb"'),Object(l.b)("h2",{id:"d\xf6nen-yan\u0131t-response"},"D\xf6nen Yan\u0131t (Response)"),Object(l.b)("p",null,"Ba\u015far\u0131l\u0131 sonu\xe7lanan API istekleri ",Object(l.b)("strong",{parentName:"p"},"http-2XX")," cevap kodu ile cevap json objesini d\xf6ner."),Object(l.b)("h3",{id:"yan\u0131t-\xf6rne\u011fi"},"Yan\u0131t \xd6rne\u011fi"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n   "recipient_id": "2074022437",\n   "message_id": "-7523925115459309081"\n}\n')))}g.isMDXComponent=!0},192:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t(50);a.default=function(){return Object(n.useContext)(i.a)}},193:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t(194);var n=t(192);function i(e){var a=(Object(n.default)().siteConfig||{}).baseUrl,t=void 0===a?"/":a;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?t+e.slice(1):t+e}},194:function(e,a,t){"use strict";var n=t(17),i=t(36),l=t(195),r="".startsWith;n(n.P+n.F*t(196)("startsWith"),"String",{startsWith:function(e){var a=l(this,e,"startsWith"),t=i(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),n=String(e);return r?r.call(a,n,t):a.slice(t,t+n.length)===n}})},195:function(e,a,t){var n=t(69),i=t(23);e.exports=function(e,a,t){if(n(a))throw TypeError("String#"+t+" doesn't accept regex!");return String(i(e))}},196:function(e,a,t){var n=t(2)("match");e.exports=function(e){var a=/./;try{"/./"[e](a)}catch(t){try{return a[n]=!1,!"/./"[e](a)}catch(i){}}return!0}}}]);